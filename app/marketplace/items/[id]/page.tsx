\'use client\';\n\nimport { useEffect, useState } from \'react\';\nimport { sdk } from \'@/lib/sdk\';\nimport { useAuth } from \'@/hooks/AuthContext\';\nimport { useParams, useRouter } from \'next/navigation\';\nimport { MarketplaceItem } from \'@shared/schema\'; // Assuming shared types exist\n\nexport default function MarketplaceItemDetailsPage() {\n  const { user } = useAuth();\n  const router = useRouter();\n  const params = useParams();\n  const { id } = params;\n\n  const [item, setItem] = useState<MarketplaceItem | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchItemDetails() {\n      if (!id) return;\n      try {\n        const details = await sdk.marketplace.getMarketplaceItemDetails(id as string);\n        setItem(details);\n      } catch (err: any) {\n        setError(err.message || \'Failed to fetch item details.\');\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    fetchItemDetails();\n  }, [id]);\n\n  const handleDelete = async () => {\n    if (!id) return;\n    if (window.confirm(\'Tem certeza que deseja remover este an√∫ncio?\')) {\n      try {\n        await sdk.marketplace.deleteMarketplaceItem(id as string);\n        router.push(\'/marketplace\');\n      } catch (err: any) {\n        setError(err.message || \'Failed to delete the item.\');\n      }\n    }\n  };\n
  if (isLoading) return <div className=\"text-center p-10\">Loading item...</div>;\n  if (error) return <div className=\"text-red-500 text-center p-10\">Error: {error}</div>;\n  if (!item) return <div className=\"text-center p-10\">Item not found.</div>;\n\n  const isOwner = user?.id === item.sellerId;\n\n  return (\n    <div className=\"container mx-auto p-4 max-w-4xl\">\n       <button onClick={() => router.back()} className=\"mb-6 text-sm text-gray-600 hover:text-gray-800\">\n        &larr; Voltar para o Marketplace\n      </button>\n      <div className=\"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2\">\n          <div className=\"p-4 bg-gray-100 flex items-center justify-center\">\n             {/* Image placeholder */}\n             <span className=\"text-gray-500 text-lg\">Imagem do Produto</span>\n          </div>\n          <div className=\"p-8 flex flex-col\">\n            <h1 className=\"text-4xl font-bold font-poppins text-gray-800\">{item.title}</h1>\n            <p className=\"text-2xl font-semibold text-green-600 my-4\">R$ {item.price.toFixed(2)}</p>\n            <p className=\"text-gray-700 leading-relaxed mb-6\">{item.description}</p>\n\n            <div className=\"mt-auto pt-6 border-t\">\n                <p className=\"text-sm text-gray-500\">Vendido por:</p>\n                <p className=\"font-semibold text-gray-800 text-lg\">{item.seller.name}</p>\n                <p className=\"text-sm text-gray-600\">Apartamento: {item.seller.apartment}</p>\n\n                {isOwner && (\n                    <div className=\"flex items-center space-x-4 mt-6\">\n                        <button onClick={() => router.push(`/marketplace/items/${item.id}/edit`)} className=\"flex-1 px-4 py-2 text-sm font-bold text-white bg-yellow-500 rounded-md hover:bg-yellow-600\">\n                            Editar\n                        </button>\n                        <button onClick={handleDelete} className=\"flex-1 px-4 py-2 text-sm font-bold text-white bg-red-600 rounded-md hover:bg-red-700\">\n                            Remover\n                        </button>\n                    </div>\n                )}\n\n                 {!isOwner && (\n                     <button className=\"w-full mt-6 py-3 font-bold text-white bg-blue-600 rounded-lg hover:bg-blue-700\">\n                        Iniciar Conversa com Vendedor\n                    </button>\n                 )}
            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n