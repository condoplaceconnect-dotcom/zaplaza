\'use client\';\n\nimport { useEffect, useState } from \'react\';\nimport { sdk } from \'@/lib/sdk\';\nimport { useAuth } from \'@/hooks/AuthContext\';\nimport { useRouter } from \'next/navigation\';\nimport { MarketplaceItem } from \'@shared/schema\'; // Assuming shared types exist\n\nexport default function MarketplacePage() {\n  const { isLoading, isAuthenticated } = useAuth();\n  const router = useRouter();\n  const [items, setItems] = useState<MarketplaceItem[]>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      router.push(\'/login\');\n    }\n\n    async function fetchItems() {\n      try {\n        const marketplaceItems = await sdk.marketplace.listMarketplaceItems();\n        setItems(marketplaceItems);\n      } catch (err: any) {\n        setError(err.message || \'Failed to fetch marketplace items.\');\n      }\n    }\n\n    if (isAuthenticated) {\n      fetchItems();\n    }\n  }, [isLoading, isAuthenticated, router]);\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"container mx-auto p-4 font-inter\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold font-poppins text-gray-800\">Achadinhos do Condomínio</h1>\n        <button \n          onClick={() => router.push(\'/marketplace/new\')}\n          className=\"px-6 py-2 font-bold text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\">\n          Anunciar Item\n        </button>\n      </div>\n
      {error && <p className=\"text-red-500 bg-red-100 p-3 rounded-md mb-6\">{error}</p>}\n\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n        {items.length > 0 ? (\n          items.map(item => (\n            <div \n              key={item.id}\n              className=\"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden cursor-pointer hover:shadow-lg transition-shadow duration-200\"\n              onClick={() => router.push(`/marketplace/items/${item.id}`)}\n            >\n              <div className=\"w-full h-48 bg-gray-200 flex items-center justify-center\">\n                 {/* Placeholder for an image */}\n                 <span className=\"text-gray-500\">Imagem</span>\n              </div>\n              <div className=\"p-4\">\n                <h3 className=\"font-bold text-lg text-gray-800 truncate\">{item.title}</h3>\n                <p className=\"text-gray-600 text-sm mt-1 truncate\">{item.description}</p>\n                <p className=\"font-bold text-xl text-green-600 mt-2\">R$ {item.price.toFixed(2)}</p>\n                <p className=\"text-xs text-gray-500 mt-2\">Vendido por: {item.seller.name}</p>\n              </div>\n            </div>\n          ))\n        ) : (\n          <div className=\"col-span-full text-center py-10\">\n            <p className=\"text-gray-500\">Nenhum item à venda no momento. Que tal ser o primeiro?</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n