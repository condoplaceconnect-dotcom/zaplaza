\'use client\';\n\nimport { useState } from \'react\';\nimport { sdk } from \'@/lib/sdk\';\nimport { useRouter } from \'next/navigation\';\nimport { useAuth } from \'@/hooks/AuthContext\';\n\nexport default function NewMarketplaceItemPage() {\n  const [title, setTitle] = useState(\'\');\n  const [description, setDescription] = useState(\'\');\n  const [category, setCategory] = useState(\'\');\n  const [price, setPrice] = useState(\'\');\n  const [imageUrl, setImageUrl] = useState(\'\');\n  const [error, setError] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const router = useRouter();\n  const { isAuthenticated } = useAuth();\n\n  if (!isAuthenticated) {\n    router.push(\'/login\');\n    return null;\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setIsSubmitting(true);\n\n    try {\n      await sdk.marketplace.createMarketplaceItem({\n        title,\n        description,\n        category,\n        price: parseFloat(price),\n        imageUrl: imageUrl || undefined,\n      });\n      router.push(\'/marketplace\'); // Redirect to marketplace home on success\n    } catch (err: any) {\n      setError(err.message || \'Falha ao anunciar o item. Verifique os dados e tente novamente.\');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-4 max-w-2xl\">\n       <button onClick={() => router.back()} className=\"mb-6 text-sm text-gray-600 hover:text-gray-800\">\n        &larr; Voltar\n      </button>\n      <h1 className=\"text-3xl font-bold font-poppins text-gray-800 mb-6\">Anunciar um Achadinho</h1>\n      <form onSubmit={handleSubmit} className=\"p-8 bg-white rounded-lg border border-gray-200 shadow-sm space-y-6\">\n        <div>\n          <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-1\">Título do Anúncio</label>\n          <input id=\"title\" type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} required placeholder=\'Ex: Sofá-cama em bom estado\' className=\"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500\" />\n        </div>\n        <div>\n          <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">Descrição</label>\n          <textarea id=\"description\" value={description} onChange={(e) => setDescription(e.target.value)} rows={4} placeholder=\'Detalhes sobre o item, tempo de uso, motivo da venda, etc.\' className=\"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500\" />\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n           <div>\n              <label htmlFor=\"category\" className=\"block text-sm font-medium text-gray-700 mb-1\">Categoria</label>\n              <input id=\"category\" type=\"text\" value={category} onChange={(e) => setCategory(e.target.value)} required placeholder=\'Ex: Móveis, Eletrônicos...\' className=\"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500\" />\n           </div>\n           <div>\n              <label htmlFor=\"price\" className=\"block text-sm font-medium text-gray-700 mb-1\">Preço (R$)</label>\n              <input id=\"price\" type=\"number\" value={price} onChange={(e) => setPrice(e.target.value)} required placeholder=\'Ex: 150.00\' className=\"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500\" />\n           </div>\n        </div>\n         <div>\n          <label htmlFor=\"imageUrl\" className=\"block text-sm font-medium text-gray-700 mb-1\">URL da Imagem (Opcional)</label>\n          <input id=\"imageUrl\" type=\"text\" value={imageUrl} onChange={(e) => setImageUrl(e.target.value)} placeholder=\'https://...\' className=\"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500\" />\n        </div>\n        {error && <p className=\"text-sm text-red-600\">{error}</p>}\n        <div>\n          <button type=\"submit\" disabled={isSubmitting} className=\"w-full px-6 py-3 font-bold text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400\">\n            {isSubmitting ? \'Publicando...\' : \'Publicar Anúncio\'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n