\'use client\';\n\nimport { useEffect, useState } from \'react\';\nimport { sdk } from \'@/lib/sdk\';\nimport { useAuth } from \'@/hooks/AuthContext\';\nimport { useRouter } from \'next/navigation\';\nimport { LoanRequest, Loan } from \'@shared/schema\'; // Assuming shared types exist\n\nexport default function LoansPage() {\n  const { user, isLoading, isAuthenticated } = useAuth();\n  const router = useRouter();\n  const [openRequests, setOpenRequests] = useState<LoanRequest[]>([]);\n  const [myLoans, setMyLoans] = useState<Loan[]>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      router.push(\'/login\');\n    }\n\n    async function fetchData() {\n      try {\n        const requests = await sdk.loans.listOpenLoanRequests();\n        const loans = await sdk.loans.getUserLoans();\n        setOpenRequests(requests);\n        setMyLoans(loans);\n      } catch (err: any) {\n        setError(err.message || \'Failed to fetch data.\');\n      }\n    }\n\n    if (isAuthenticated) {\n      fetchData();\n    }\n  }, [isLoading, isAuthenticated, router]);\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n
  return (\n    <div className=\"container mx-auto p-4 font-inter\'>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-3xl font-bold font-poppins text-gray-800\">Empresta Aí</h1>\n        <button \n          onClick={() => router.push(\'/loans/new\')}\n          className=\"px-6 py-2 font-bold text-white bg-green-600 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\">\n          Pedir Emprestado\n        </button>\n      </div>\n\n      {error && <p className=\"text-red-500 bg-red-100 p-3 rounded-md mb-6\">{error}</p>}\n\n      {/* My Loans Section */}\n      <div className=\"mb-10\">\n        <h2 className=\"text-2xl font-bold text-gray-700 mb-4\">Meus Empréstimos</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {myLoans.length > 0 ? (\n            myLoans.map(loan => (\n              <div key={loan.id} className=\"p-4 bg-white rounded-lg border border-gray-200 shadow-sm cursor-pointer hover:shadow-md\" onClick={() => router.push(`/loans/${loan.id}`)}>\n                 <p className=\"font-bold text-lg text-gray-800\">{loan.item.itemName}</p>\n                 <p className=\"text-sm text-gray-600\">Status: <span className=\"font-semibold\">{loan.status}</span></p>\n                 <p className=\"text-sm text-gray-500\">{loan.ownerId === user?.id ? `Emprestado para ${loan.borrower.name}` : `Emprestado de ${loan.owner.name}`}</p>\n              </div>\n            ))\n          ) : (\n            <p className=\"text-gray-500\">Você não tem empréstimos ativos.</p>\n          )}\n        </div>\n      </div>\n\n      {/* Open Requests Section */}\n      <div>\n        <h2 className=\"text-2xl font-bold text-gray-700 mb-4\">Pedidos no seu Condomínio</h2>\n        <div className=\"space-y-4\">\n          {openRequests.length > 0 ? (\n            openRequests.map(request => (\n              <div key={request.id} className=\"p-4 bg-white rounded-lg border border-gray-200 shadow-sm flex justify-between items-center cursor-pointer hover:bg-gray-50\" onClick={() => router.push(`/loans/requests/${request.id}`)}>\n                <div>\n                    <p className=\"font-bold text-lg text-gray-800\">{request.itemName}</p>\n                    <p className=\"text-sm text-gray-600\">Pedido por: {request.requester.name}</p>\n                </div>\n                <span className=\"text-sm font-medium text-green-700 bg-green-100 px-3 py-1 rounded-full\">Ver Pedido</span>\n              </div>\n            ))\n          ) : (\n            <p className=\"text-gray-500\">Nenhum pedido de empréstimo aberto no momento.</p>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n