\'use client\';\n\nimport { useState } from \'react\';\nimport { sdk } from \'@/lib/sdk\';\nimport { useRouter } from \'next/navigation\';\nimport { useAuth } from \'@/hooks/AuthContext\';\n\nexport default function NewLoanRequestPage() {\n  const [itemName, setItemName] = useState(\'\');\n  const [description, setDescription] = useState(\'\');\n  const [duration, setDuration] = useState(\'\');\n  const [error, setError] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const router = useRouter();\n  const { isAuthenticated } = useAuth();\n\n  if (!isAuthenticated) {\n    router.push(\'/login\');\n    return null;\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setIsSubmitting(true);\n\n    try {\n      await sdk.loans.createLoanRequest({ itemName, description, duration });\n      router.push(\'/loans\'); // Redirect to the main loans page on success\n    } catch (err: any) {\n      setError(err.message || \'Falha ao criar o pedido. Tente novamente.\');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-4 max-w-2xl\">\n      <button onClick={() => router.back()} className=\"mb-6 text-sm text-gray-600 hover:text-gray-800\">\n        &larr; Voltar\n      </button>\n      <h1 className=\"text-3xl font-bold font-poppins text-gray-800 mb-6\">Pedir um Item Emprestado</h1>\n      <form onSubmit={handleSubmit} className=\"p-8 bg-white rounded-lg border border-gray-200 shadow-sm space-y-6\">\n        <div>\n          <label htmlFor=\"itemName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            O que você precisa?\n          </label>\n          <input\n            id=\"itemName\"\n            type=\"text\"\n            value={itemName}\n            onChange={(e) => setItemName(e.target.value)}\n            required\n            placeholder=\'Ex: Furadeira, forma de bolo, escada...\'\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500\"\n          />\n        </div>\n        <div>\n          <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Descrição\n          </label>\n          <textarea\n            id=\"description\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            required\n            rows={4}\n            placeholder=\'Descreva o item e para que você o usará. Isso ajuda quem vai emprestar a entender sua necessidade.\'\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500\"\n          />\n        </div>\n        <div>\n          <label htmlFor=\"duration\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Por quanto tempo?\n          </label>\n          <input\n            id=\"duration\"\n            type=\"text\"\n            value={duration}\n            onChange={(e) => setDuration(e.target.value)}\n            required\n            placeholder=\'Ex: 2 horas, 1 dia, fim de semana...\'\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500\"\n          />\n        </div>\n        {error && <p className=\"text-sm text-red-600\">{error}</p>}\n        <div>\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className=\"w-full px-6 py-3 font-bold text-white bg-green-600 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400\"\n          >\n            {isSubmitting ? \'Publicando...\' : \'Publicar Pedido\'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n